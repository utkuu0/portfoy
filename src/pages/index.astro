---
import Layout from "../layouts/Layout.astro";
import Header from "../components/Header.astro";

import ProjectCard from "../components/ProjectCard.astro";
import SkillBar from "../components/SkillBar.astro";
import Footer from "../components/Footer.astro";

// Import translations
import { translations } from "../i18n/translations";

const navLinks = [
  { href: "#hakkimda", label: "HakkÄ±mda", key: "about" },
  { href: "#projeler", label: "Projeler", key: "projects" },
  { href: "#yetenekler", label: "Yetenekler", key: "skills" },
  { href: "#iletisim", label: "Ä°letiÅŸim", key: "contact" },
];

const projects = [
  {
    title: "TechNews",
    description:
      "Modern Android teknoloji haberleri uygulamasÄ±. Jetpack Compose UI, Clean Architecture, MVVM pattern, Room ile offline destek, WorkManager ile gÃ¼nlÃ¼k bildirimler, karanlÄ±k mod ve pull-to-refresh Ã¶zellikleri.",
    tags: ["Kotlin", "Jetpack Compose", "MVVM", "Room", "Hilt"],
    github: "https://github.com/utkuu0/newsApp",
    image: "/projects/technews.png",
  },
  {
    title: "FinanssHub",
    description:
      "AnlÄ±k dÃ¶viz kurlarÄ±nÄ± takip edebileceÄŸiniz Android uygulamasÄ±. API entegrasyonu ile gÃ¼ncel kur bilgileri, temiz ve kullanÄ±cÄ± dostu arayÃ¼z tasarÄ±mÄ±.",
    tags: ["Kotlin", "Android", "API"],
    github: "https://github.com/utkuu0/FinanssHub",
    image: "/projects/finansshub.png",
  },
  {
    title: "PortfÃ¶y",
    description:
      "Astro framework ile geliÅŸtirilmiÅŸ kiÅŸisel portfÃ¶y sitesi. TÃ¼rkÃ§e/Ä°ngilizce Ã§oklu dil desteÄŸi, responsive tasarÄ±m, SEO optimizasyonu ve modern glassmorphism UI.",
    tags: ["Astro", "TypeScript", "CSS"],
    github: "https://github.com/utkuu0/portfoy",
    image: "/projects/portfoy.png",
  },
];

const skills = [
  { name: "Kotlin / Android", icon: "ğŸ“±", level: 90 },
  { name: "React / Next.js", icon: "âš›ï¸", level: 85 },
  { name: "TypeScript", icon: "ğŸ”·", level: 80 },
  { name: "Tailwind CSS", icon: "ğŸ¨", level: 95 },
  { name: "Node.js", icon: "ğŸŸ¢", level: 70 },
  { name: "Git / GitHub", icon: "ğŸ™", level: 85 },
];
---

<Layout title="Utku | Full Stack Developer">
  <Header links={navLinks} />

  <main>
    <!-- Hero Section - Photo Left, Intro Right -->
    <section id="hero" class="min-h-screen flex items-center px-6 pt-24">
      <div class="max-w-6xl mx-auto w-full">
        <div class="grid md:grid-cols-2 gap-12 items-center">
          <!-- Photo Left -->
          <div class="relative order-2 md:order-1">
            <div
              class="w-72 h-72 md:w-96 md:h-96 mx-auto rounded-3xl bg-gradient-to-br from-slate-400 to-slate-600 p-1"
            >
              <img
                src="/profile.jpg"
                alt="Utku"
                class="w-full h-full rounded-3xl object-cover object-top"
              />
            </div>
          </div>

          <!-- Intro Right -->
          <div class="order-1 md:order-2 text-center md:text-left">
            <h1 class="text-4xl md:text-6xl font-bold mb-4 leading-tight">
              <span data-i18n="hero.greeting">Merhaba, ben</span>
              <span class="gradient-text">Utku</span>
            </h1>
            <p
              class="text-xl md:text-2xl text-slate-300 font-medium mb-4"
              data-i18n="hero.role"
            >
              Full Stack & Mobile Developer
            </p>
            <p
              class="text-lg text-slate-400 leading-relaxed"
              data-i18n="hero.description"
            >
              Modern web ve mobil uygulamalar geliÅŸtiriyorum. KullanÄ±cÄ± deneyimi
              odaklÄ±, performanslÄ± ve Ã¶lÃ§eklenebilir Ã§Ã¶zÃ¼mler sunuyorum.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- About Section -->
    <section id="hakkimda" class="py-24 px-6">
      <div class="max-w-4xl mx-auto">
        <h2 class="text-3xl md:text-4xl font-bold mb-8 text-center">
          <span class="gradient-text" data-i18n="about.title">HakkÄ±mda</span>
        </h2>
        <p
          class="text-slate-300 text-lg leading-relaxed mb-6 text-center"
          data-i18n="about.p1"
        >
          YazÄ±lÄ±m geliÅŸtirme tutkusuyla dolu bir geliÅŸtiriciyim. Android
          uygulamalarÄ±ndan web projelerine kadar geniÅŸ bir yelpazede
          Ã§alÄ±ÅŸÄ±yorum.
        </p>
        <p
          class="text-slate-400 leading-relaxed mb-10 text-center"
          data-i18n="about.p2"
        >
          Modern teknolojileri kullanarak kullanÄ±cÄ± dostu ve performanslÄ±
          uygulamalar geliÅŸtirmeyi seviyorum. SÃ¼rekli Ã¶ÄŸrenme ve kendimi
          geliÅŸtirme konusunda tutkuluyum.
        </p>

        <!-- Stats -->
        <div class="grid grid-cols-2 gap-4 max-w-md mx-auto">
          <div class="glass rounded-xl p-4 text-center">
            <div class="text-3xl font-bold gradient-text mb-1">2+</div>
            <div
              class="text-xs text-slate-500 uppercase tracking-widest"
              data-i18n="about.stats.experience"
            >
              YÄ±l Deneyim
            </div>
          </div>
          <div class="glass rounded-xl p-4 text-center">
            <div class="text-3xl font-bold gradient-text mb-1">5+</div>
            <div
              class="text-xs text-slate-500 uppercase tracking-widest"
              data-i18n="about.stats.projects"
            >
              Proje
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Projects Section -->
    <section id="projeler" class="py-24 px-6">
      <div class="max-w-6xl mx-auto">
        <div class="text-center mb-16">
          <h2 class="text-3xl md:text-4xl font-bold mb-4">
            <span class="gradient-text" data-i18n="projects.title"
              >Projeler</span
            >
          </h2>
          <p
            class="text-slate-400 max-w-2xl mx-auto"
            data-i18n="projects.subtitle"
          >
            Ãœzerinde Ã§alÄ±ÅŸtÄ±ÄŸÄ±m ve geliÅŸtirdiÄŸim projelerden bazÄ±larÄ±
          </p>
        </div>

        <div class="grid md:grid-cols-3 gap-6">
          {projects.map((project) => <ProjectCard {...project} />)}
        </div>
      </div>
    </section>

    <!-- Skills Section -->
    <section id="yetenekler" class="py-24 px-6">
      <div class="max-w-4xl mx-auto">
        <div class="text-center mb-16">
          <h2 class="text-3xl md:text-4xl font-bold mb-4">
            <span class="gradient-text" data-i18n="skills.title"
              >Yetenekler</span
            >
          </h2>
          <p
            class="text-slate-400 max-w-2xl mx-auto"
            data-i18n="skills.subtitle"
          >
            KullandÄ±ÄŸÄ±m teknolojiler ve araÃ§lar
          </p>
        </div>

        <div class="grid md:grid-cols-2 gap-4">
          {skills.map((skill) => <SkillBar {...skill} />)}
        </div>
      </div>
    </section>

    <!-- Contact Section -->
    <section id="iletisim" class="py-24 px-6">
      <div class="max-w-4xl mx-auto text-center">
        <h2 class="text-3xl md:text-4xl font-bold mb-4">
          <span class="gradient-text" data-i18n="contact.title"
            >Ä°letiÅŸime GeÃ§in</span
          >
        </h2>
        <p
          class="text-slate-400 mb-12 max-w-xl mx-auto"
          data-i18n="contact.subtitle"
        >
          Bir proje fikriniz mi var? Birlikte Ã§alÄ±ÅŸmak ister misiniz? Bana
          ulaÅŸÄ±n!
        </p>

        <div class="glass rounded-2xl p-8 md:p-12">
          <form id="contact-form" class="space-y-6">
            <input
              type="text"
              id="contact-name"
              required
              placeholder="AdÄ±nÄ±z"
              data-i18n-placeholder="contact.form.name"
              class="w-full px-6 py-4 bg-slate-800/50 border border-white/10 rounded-xl text-white placeholder:text-slate-500 focus:outline-none focus:border-slate-400 transition-colors"
            />
            <input
              type="email"
              id="contact-email"
              required
              placeholder="E-posta adresiniz"
              data-i18n-placeholder="contact.form.email"
              class="w-full px-6 py-4 bg-slate-800/50 border border-white/10 rounded-xl text-white placeholder:text-slate-500 focus:outline-none focus:border-slate-400 transition-colors"
            />
            <input
              type="text"
              id="contact-subject"
              required
              placeholder="Konu"
              data-i18n-placeholder="contact.form.subject"
              class="w-full px-6 py-4 bg-slate-800/50 border border-white/10 rounded-xl text-white placeholder:text-slate-500 focus:outline-none focus:border-slate-400 transition-colors"
            />
            <textarea
              rows="5"
              id="contact-message"
              required
              placeholder="MesajÄ±nÄ±z..."
              data-i18n-placeholder="contact.form.message"
              class="w-full px-6 py-4 bg-slate-800/50 border border-white/10 rounded-xl text-white placeholder:text-slate-500 focus:outline-none focus:border-slate-400 transition-colors resize-none"
            ></textarea>
            <button
              type="submit"
              class="w-full md:w-auto px-8 py-4 bg-gradient-to-r from-slate-200 to-slate-400 rounded-xl text-slate-900 font-semibold hover:shadow-xl hover:shadow-white/20 transition-all duration-300 hover:scale-105"
            >
              <span data-i18n="contact.form.submit">Mesaj GÃ¶nder</span>
            </button>
          </form>
        </div>
      </div>
    </section>
  </main>

  <!-- Contact Form Formspree Handler -->
  <script>
    const form = document.getElementById("contact-form") as HTMLFormElement;
    const submitBtn = form?.querySelector(
      'button[type="submit"]',
    ) as HTMLButtonElement;
    const submitText = submitBtn?.querySelector("span");

    form?.addEventListener("submit", async function (e) {
      e.preventDefault();

      if (submitBtn) submitBtn.disabled = true;
      if (submitText) submitText.textContent = "GÃ¶nderiliyor...";

      const name = (document.getElementById("contact-name") as HTMLInputElement)
        .value;
      const email = (
        document.getElementById("contact-email") as HTMLInputElement
      ).value;
      const subject = (
        document.getElementById("contact-subject") as HTMLInputElement
      ).value;
      const message = (
        document.getElementById("contact-message") as HTMLTextAreaElement
      ).value;

      try {
        const response = await fetch("https://formspree.io/f/mkogwkvr", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            Accept: "application/json",
          },
          body: JSON.stringify({
            name: name,
            email: email,
            _subject: subject,
            message: message,
          }),
        });

        if (response.ok) {
          if (submitText) submitText.textContent = "GÃ¶nderildi! âœ“";
          form.reset();

          setTimeout(() => {
            if (submitText) submitText.textContent = "Mesaj GÃ¶nder";
            if (submitBtn) submitBtn.disabled = false;
          }, 3000);
        } else {
          throw new Error("Form submission failed");
        }
      } catch (error) {
        console.error("Form Error:", error);
        if (submitText) submitText.textContent = "Hata! Tekrar deneyin";
        if (submitBtn) submitBtn.disabled = false;

        setTimeout(() => {
          if (submitText) submitText.textContent = "Mesaj GÃ¶nder";
        }, 3000);
      }
    });
  </script>

  <!-- WhatsApp Sticky Button -->
  <a
    href="https://wa.me/905050988422?text=Merhaba%2C%20portf%C3%B6y%20sitenizden%20ula%C5%9F%C4%B1yorum."
    target="_blank"
    rel="noopener noreferrer"
    class="fixed bottom-6 right-6 z-50 w-14 h-14 bg-green-500 rounded-full flex items-center justify-center shadow-lg hover:bg-green-600 hover:scale-110 transition-all duration-300 hover:shadow-green-500/50"
    aria-label="WhatsApp ile iletiÅŸime geÃ§"
  >
    <svg class="w-7 h-7 text-white" fill="currentColor" viewBox="0 0 24 24">
      <path
        d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"
      ></path>
    </svg>
  </a>

  <Footer />
</Layout>

<script define:vars={{ translations }}>
  // Language switching logic
  function updateLanguage(lang) {
    console.log("Switching to", lang);
    const data = translations[lang];
    if (!data) return;

    // Update text content
    document.querySelectorAll("[data-i18n]").forEach((el) => {
      const key = el.getAttribute("data-i18n");
      const keys = key.split(".");
      let value = data;

      for (const k of keys) {
        value = value ? value[k] : null;
      }

      if (value) el.textContent = value;
    });

    // Update placeholders
    document.querySelectorAll("[data-i18n-placeholder]").forEach((el) => {
      const key = el.getAttribute("data-i18n-placeholder");
      const keys = key.split(".");
      let value = data;

      for (const k of keys) {
        value = value ? value[k] : null;
      }

      if (value) el.placeholder = value;
    });

    // Update header language display
    const currentLangSpan = document.getElementById("current-lang");
    const currentLangIcon = document.getElementById("current-lang-icon");

    if (currentLangSpan) currentLangSpan.textContent = lang.toUpperCase();
    if (currentLangIcon) {
      currentLangIcon.src = lang === "tr" ? "/flags/tr.svg" : "/flags/en.svg";
    }

    // Hide current language from dropdown
    document.querySelectorAll(".lang-option").forEach((option) => {
      const optionLang = option.getAttribute("data-lang");
      if (optionLang === lang) {
        option.style.display = "none";
      } else {
        option.style.display = "flex";
      }
    });

    // Save preference
    localStorage.setItem("language", lang);
  }

  // Listen for language changes from Header
  document.addEventListener("click", (e) => {
    const btn = e.target.closest(".lang-option");
    if (btn) {
      const lang = btn.getAttribute("data-lang");
      updateLanguage(lang);
    }
  });

  // Initialize
  document.addEventListener("DOMContentLoaded", () => {
    const savedLang = localStorage.getItem("language") || "tr";
    updateLanguage(savedLang);
  });
</script>
