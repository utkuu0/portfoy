---
import Layout from "../layouts/Layout.astro";
import Header from "../components/Header.astro";

import ProjectCard from "../components/ProjectCard.astro";
import SkillBar from "../components/SkillBar.astro";
import Footer from "../components/Footer.astro";

// Import translations
import { translations } from "../i18n/translations";

const navLinks = [
  { href: "#hakkimda", label: "HakkÄ±mda", key: "about" },
  { href: "#projeler", label: "Projeler", key: "projects" },
  { href: "#yetenekler", label: "Yetenekler", key: "skills" },
  { href: "#iletisim", label: "Ä°letiÅŸim", key: "contact" },
];

const projects = [
  {
    title: "News App",
    description:
      "GÃ¼ncel teknoloji haberlerini takip edebileceÄŸiniz modern Android uygulamasÄ±. Kotlin ve Jetpack Compose ile geliÅŸtirildi.",
    tags: ["Kotlin", "Jetpack Compose", "MVVM", "Room"],
    github: "https://github.com/utkua/newsApp",
  },
  {
    title: "Alarm UygulamasÄ±",
    description:
      "Ã–zelleÅŸtirilebilir alarm ve hatÄ±rlatÄ±cÄ± uygulamasÄ±. Snooze, tekrarlayan alarmlar ve bildirimler.",
    tags: ["Android", "Kotlin", "WorkManager"],
    github: "https://github.com/utkua",
  },
  {
    title: "E-Ticaret Sitesi",
    description:
      "Next.js ile geliÅŸtirilmiÅŸ modern e-ticaret platformu. Dark mode, sepet ve kategori filtreleme.",
    tags: ["Next.js", "React", "Tailwind CSS"],
    github: "https://github.com/utkua",
  },
  {
    title: "PortfÃ¶y Sitesi",
    description:
      "Astro ile geliÅŸtirilmiÅŸ kiÅŸisel portfÃ¶y sitesi. HÄ±zlÄ±, SEO dostu ve modern tasarÄ±m.",
    tags: ["Astro", "Tailwind CSS", "TypeScript"],
    github: "https://github.com/utkua/portfoy",
  },
];

const skills = [
  { name: "Kotlin / Android", icon: "ğŸ“±", level: 90 },
  { name: "React / Next.js", icon: "âš›ï¸", level: 85 },
  { name: "TypeScript", icon: "ğŸ”·", level: 80 },
  { name: "Tailwind CSS", icon: "ğŸ¨", level: 95 },
  { name: "Node.js", icon: "ğŸŸ¢", level: 70 },
  { name: "Git / GitHub", icon: "ğŸ™", level: 85 },
];
---

<Layout title="Utku | Full Stack Developer">
  <Header links={navLinks} />

  <main>
    <!-- Hero Section - Photo Left, Intro Right -->
    <section id="hero" class="min-h-screen flex items-center px-6 pt-24">
      <div class="max-w-6xl mx-auto w-full">
        <div class="grid md:grid-cols-2 gap-12 items-center">
          <!-- Photo Left -->
          <div class="relative order-2 md:order-1">
            <div
              class="w-72 h-72 md:w-96 md:h-96 mx-auto rounded-3xl bg-gradient-to-br from-slate-400 to-slate-600 p-1"
            >
              <img
                src="/profile.jpg"
                alt="Utku"
                class="w-full h-full rounded-3xl object-cover object-top"
              />
            </div>
          </div>

          <!-- Intro Right -->
          <div class="order-1 md:order-2 text-center md:text-left">
            <h1 class="text-4xl md:text-6xl font-bold mb-4 leading-tight">
              <span data-i18n="hero.greeting">Merhaba, ben</span>
              <span class="gradient-text">Utku</span>
            </h1>
            <p
              class="text-xl md:text-2xl text-slate-300 font-medium mb-4"
              data-i18n="hero.role"
            >
              Full Stack & Mobile Developer
            </p>
            <p
              class="text-lg text-slate-400 leading-relaxed"
              data-i18n="hero.description"
            >
              Modern web ve mobil uygulamalar geliÅŸtiriyorum. KullanÄ±cÄ± deneyimi
              odaklÄ±, performanslÄ± ve Ã¶lÃ§eklenebilir Ã§Ã¶zÃ¼mler sunuyorum.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- About Section -->
    <section id="hakkimda" class="py-24 px-6">
      <div class="max-w-4xl mx-auto">
        <h2 class="text-3xl md:text-4xl font-bold mb-8 text-center">
          <span class="gradient-text" data-i18n="about.title">HakkÄ±mda</span>
        </h2>
        <p
          class="text-slate-300 text-lg leading-relaxed mb-6 text-center"
          data-i18n="about.p1"
        >
          YazÄ±lÄ±m geliÅŸtirme tutkusuyla dolu bir geliÅŸtiriciyim. Android
          uygulamalarÄ±ndan web projelerine kadar geniÅŸ bir yelpazede
          Ã§alÄ±ÅŸÄ±yorum.
        </p>
        <p
          class="text-slate-400 leading-relaxed mb-10 text-center"
          data-i18n="about.p2"
        >
          Modern teknolojileri kullanarak kullanÄ±cÄ± dostu ve performanslÄ±
          uygulamalar geliÅŸtirmeyi seviyorum. SÃ¼rekli Ã¶ÄŸrenme ve kendimi
          geliÅŸtirme konusunda tutkuluyum.
        </p>

        <!-- Stats -->
        <div class="grid grid-cols-3 gap-4 max-w-lg mx-auto">
          <div class="glass rounded-xl p-4 text-center">
            <div class="text-3xl font-bold gradient-text mb-1">3+</div>
            <div
              class="text-xs text-slate-500 uppercase tracking-widest"
              data-i18n="about.stats.experience"
            >
              YÄ±l Deneyim
            </div>
          </div>
          <div class="glass rounded-xl p-4 text-center">
            <div class="text-3xl font-bold gradient-text mb-1">10+</div>
            <div
              class="text-xs text-slate-500 uppercase tracking-widest"
              data-i18n="about.stats.projects"
            >
              Proje
            </div>
          </div>
          <div class="glass rounded-xl p-4 text-center">
            <div class="text-3xl font-bold gradient-text mb-1">5+</div>
            <div
              class="text-xs text-slate-500 uppercase tracking-widest"
              data-i18n="about.stats.clients"
            >
              Mutlu MÃ¼ÅŸteri
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Projects Section -->
    <section id="projeler" class="py-24 px-6">
      <div class="max-w-6xl mx-auto">
        <div class="text-center mb-16">
          <h2 class="text-3xl md:text-4xl font-bold mb-4">
            <span class="gradient-text" data-i18n="projects.title"
              >Projeler</span
            >
          </h2>
          <p
            class="text-slate-400 max-w-2xl mx-auto"
            data-i18n="projects.subtitle"
          >
            Ãœzerinde Ã§alÄ±ÅŸtÄ±ÄŸÄ±m ve geliÅŸtirdiÄŸim projelerden bazÄ±larÄ±
          </p>
        </div>

        <div class="grid md:grid-cols-2 gap-6">
          {projects.map((project) => <ProjectCard {...project} />)}
        </div>
      </div>
    </section>

    <!-- Skills Section -->
    <section id="yetenekler" class="py-24 px-6">
      <div class="max-w-4xl mx-auto">
        <div class="text-center mb-16">
          <h2 class="text-3xl md:text-4xl font-bold mb-4">
            <span class="gradient-text" data-i18n="skills.title"
              >Yetenekler</span
            >
          </h2>
          <p
            class="text-slate-400 max-w-2xl mx-auto"
            data-i18n="skills.subtitle"
          >
            KullandÄ±ÄŸÄ±m teknolojiler ve araÃ§lar
          </p>
        </div>

        <div class="grid md:grid-cols-2 gap-4">
          {skills.map((skill) => <SkillBar {...skill} />)}
        </div>
      </div>
    </section>

    <!-- Contact Section -->
    <section id="iletisim" class="py-24 px-6">
      <div class="max-w-4xl mx-auto text-center">
        <h2 class="text-3xl md:text-4xl font-bold mb-4">
          <span class="gradient-text" data-i18n="contact.title"
            >Ä°letiÅŸime GeÃ§in</span
          >
        </h2>
        <p
          class="text-slate-400 mb-12 max-w-xl mx-auto"
          data-i18n="contact.subtitle"
        >
          Bir proje fikriniz mi var? Birlikte Ã§alÄ±ÅŸmak ister misiniz? Bana
          ulaÅŸÄ±n!
        </p>

        <div class="glass rounded-2xl p-8 md:p-12">
          <form class="space-y-6">
            <input
              type="text"
              placeholder="AdÄ±nÄ±z"
              data-i18n-placeholder="contact.form.name"
              class="w-full px-6 py-4 bg-slate-800/50 border border-white/10 rounded-xl text-white placeholder:text-slate-500 focus:outline-none focus:border-slate-400 transition-colors"
            />
            <input
              type="email"
              placeholder="E-posta adresiniz"
              data-i18n-placeholder="contact.form.email"
              class="w-full px-6 py-4 bg-slate-800/50 border border-white/10 rounded-xl text-white placeholder:text-slate-500 focus:outline-none focus:border-slate-400 transition-colors"
            />
            <input
              type="text"
              placeholder="Konu"
              data-i18n-placeholder="contact.form.subject"
              class="w-full px-6 py-4 bg-slate-800/50 border border-white/10 rounded-xl text-white placeholder:text-slate-500 focus:outline-none focus:border-slate-400 transition-colors"
            />
            <textarea
              rows="5"
              placeholder="MesajÄ±nÄ±z..."
              data-i18n-placeholder="contact.form.message"
              class="w-full px-6 py-4 bg-slate-800/50 border border-white/10 rounded-xl text-white placeholder:text-slate-500 focus:outline-none focus:border-slate-400 transition-colors resize-none"
            ></textarea>
            <button
              type="submit"
              class="w-full md:w-auto px-8 py-4 bg-gradient-to-r from-slate-200 to-slate-400 rounded-xl text-slate-900 font-semibold hover:shadow-xl hover:shadow-white/20 transition-all duration-300 hover:scale-105"
            >
              <span data-i18n="contact.form.submit">Mesaj GÃ¶nder</span>
            </button>
          </form>
        </div>
      </div>
    </section>
  </main>

  <Footer />
</Layout>

<script define:vars={{ translations }}>
  // Language switching logic
  function updateLanguage(lang) {
    console.log("Switching to", lang);
    const data = translations[lang];
    if (!data) return;

    // Update text content
    document.querySelectorAll("[data-i18n]").forEach((el) => {
      const key = el.getAttribute("data-i18n");
      const keys = key.split(".");
      let value = data;

      for (const k of keys) {
        value = value ? value[k] : null;
      }

      if (value) el.textContent = value;
    });

    // Update placeholders
    document.querySelectorAll("[data-i18n-placeholder]").forEach((el) => {
      const key = el.getAttribute("data-i18n-placeholder");
      const keys = key.split(".");
      let value = data;

      for (const k of keys) {
        value = value ? value[k] : null;
      }

      if (value) el.placeholder = value;
    });

    // Update header language display
    const currentLangSpan = document.getElementById("current-lang");
    const currentLangIcon = document.getElementById("current-lang-icon");

    if (currentLangSpan) currentLangSpan.textContent = lang.toUpperCase();
    if (currentLangIcon) {
      currentLangIcon.src = lang === "tr" ? "/flags/tr.svg" : "/flags/en.svg";
    }

    // Hide current language from dropdown
    document.querySelectorAll(".lang-option").forEach((option) => {
      const optionLang = option.getAttribute("data-lang");
      if (optionLang === lang) {
        option.style.display = "none";
      } else {
        option.style.display = "flex";
      }
    });

    // Save preference
    localStorage.setItem("language", lang);
  }

  // Listen for language changes from Header
  document.addEventListener("click", (e) => {
    const btn = e.target.closest(".lang-option");
    if (btn) {
      const lang = btn.getAttribute("data-lang");
      updateLanguage(lang);
    }
  });

  // Initialize
  document.addEventListener("DOMContentLoaded", () => {
    const savedLang = localStorage.getItem("language") || "tr";
    updateLanguage(savedLang);
  });
</script>
